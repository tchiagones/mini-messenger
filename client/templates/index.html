<template name="index">
    {{> rooms}}
    <div class="section no-pad-bot" id="index-banner">
        <div class="container">
            <div class="container">
                {{> appBody}} {{> messages}}
            </div>
        </div>
    </div>
</template>

<template name="lateralRooms">
    <nav>
        <div class="nav-wrapper container">
            <ul class="side-nav" id="mobile-demo">
                <li><a href="sass.html">Sass</a>
                </li>
                <li><a href="components.html">Components</a>
                </li>
                <li><a href="javascript.html">Javascript</a>
                </li>
                <li><a href="mobile.html">Mobile</a>
                </li>
            </ul>
        </div>
    </nav>
</template>

<template name="appBody">
    <div class="row">
        <form class="col s12">
            {{> welcome }} {{>input}}
        </form>
    </div>
</template>

<template name="welcome">
    <div class="row">
        <div class="input-field col s8">
            <input id="user" type="text">
            <label for="user">(your alias..)</label>
        </div>
        <div class="input-field col s4">
            <br> or {{> loginButtons}}
        </div>
    </div>
</template>

<template name="deleteButton">
    <a name="trash" href="#" class="button-trash align-right">
        <i class="small mdi-action-delete white-text"></i>
    </a>
</template>

<template name="romm">

</template>

<template name="message">
    <div class="row">
        {{#if isOwner}}
        <div class="col s12 m8 left">
            <div class="card light-blue darken-1">
                <div class="card-content white-text">
                    <span class="badge">{{> deleteButton}}</span>
                    <p>
                        <span class="messageInfo">{{formatMessageDate time}} - </span> <strong>{{name}}:</strong>
                    </p>
                    <div class="container left">
                        <div class="row">
                            <p>
                                <span class="message-text">{{message}}</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {{else}}
        <div class="col s12 m8 right">
            <div class="card light-blue lighten-1">
                <div class="card-content white-text">
                    <p>
                        <span class="messageInfo">{{formatMessageDate time}} - </span> {{>messageContact contactName = name contactId = userId}}
                    </p>
                    <div class="container left">
                        <div class="row">
                            <p>
                                <span class="message-text">{{message}}</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {{/if}}
    </div>
</template>

<template name="messages">
    <div class="row">
        <div class="contaier container-messages">
            {{#each messages}} {{> message}} {{/each}}
        </div>
    </div>
</template>

<template name="rooms">
    <div class="container left">
        <div class="contaier container-rooms center teal-text text-lighten-2">
            <ul class="collapsible collection rooms" data-collapsible="accordion">
                {{> globalRoom}}{{#each rooms}} {{>room roomName = name roomId = _id}} {{/each}}
            </ul>
        </div>
    </div>
</template>

<template name="messageContact">
    <a href="#modalRoom" data-target="modalRoom" class="white-text contact modal-trigger">
        <strong>{{contactName}}:</strong>
    </a>
    <div id="modalRoom" class="modal">
        <div class="modal-content center light-blue-text">
            <h4>Hey dude!</h4>
            <p>Would you like to start a chat room with your buddy?</p>
        </div>
        <div class="modal-footer">
            <a href="#!" class="modal-action modal-close red btn-flat ">Nope :(</a> {{> confirmNewRoom}}
        </div>
    </div>
</template>

<template name="confirmNewRoom">
    <a href="#!" class="modal-action modal-close light-green btn-flat ">Yep :)</a>
</template>

<template name="room">
    <li>
        <div class="collapsible-header"><a href="#" class="collection-item room-item">{{roomName}}</a>
        </div>
        <div class="collapsible-body">
            <p>#username1</p>
            <p>#username2</p>
            <p>#username3</p>
        </div>
    </li>
    <!--<a href="#" class="collection-item room-item">{{roomName}}</a>-->
</template>

<template name="globalRoom">
    <li>
        <div class="collapsible-header"><a href="#" class="collection-item room-item">GLOBAL</a>
        </div>
        <div class="collapsible-body">
            <p>Everybody is here!</p>
        </div>
    </li>
    <!--<a href="#" class="collection-item room-item">GLOBAL</a>-->
</template>

<template name="input">
    <div class="row">
        <div class="input-field col s12">
            <input id="message" type="text">
            <label for="message">your message</label>
        </div>
    </div>
</template>
<html class="" hc="a0" hcx="0">

<head>
    <title>Mini Messenger</title>
</head>

<body>
    {{> menu}}
</body>

<body data-twttr-rendered="true">






    <div class="container">
        <nav id="secondary-nav">

        </nav>
        <div id="content" class="animated fadeIn">
            <div class="row">
                <div class="col-md-8">
                    <div class="row">
                        <div class="col-sm-10">
                            <h1>Iron-Router Tutorial</h1>
                            <p>Manuel Schoebel on September 12., 2013</p>

                            <div id="share-before" class="ms-blog-share sharrre" data-url="http://www.manuel-schoebel.com/blog/iron-router-tutorial" data-text="Iron-Router Tutorial" data-title="share">
                                <div class="buttons">
                                    <div class="button twitter">
                                        <iframe id="twitter-widget-0" scrolling="no" frameborder="0" allowtransparency="true" src="http://platform.twitter.com/widgets/tweet_button.20ed5cfd7315475c9d1d523194b1645f.en.html#_=1429579272806&amp;count=horizontal&amp;dnt=false&amp;id=twitter-widget-0&amp;lang=en&amp;original_referer=http%3A%2F%2Fwww.manuel-schoebel.com%2Fblog%2Firon-router-tutorial&amp;size=m&amp;text=Iron-Router%20Tutorial&amp;url=http%3A%2F%2Fwww.manuel-schoebel.com%2Fblog%2Firon-router-tutorial&amp;via=DerMambo" class="twitter-share-button twitter-tweet-button twitter-share-button twitter-count-horizontal" title="Twitter Tweet Button" data-twttr-rendered="true" style="width: 110px; height: 20px;"></iframe>
                                    </div>
                                    <div class="button googleplus">
                                        <div id="___plusone_0" style="text-indent: 0px; margin: 0px; padding: 0px; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 450px; height: 20px; background: transparent;">
                                            <iframe frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position: static; top: 0px; width: 450px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" tabindex="0" vspace="0" width="100%" id="I0_1429579272870" name="I0_1429579272870" src="https://apis.google.com/u/0/se/0/_/+1/fastbutton?usegapi=1&amp;size=medium&amp;annotation=&amp;hl=en-US&amp;origin=http%3A%2F%2Fwww.manuel-schoebel.com&amp;url=http%3A%2F%2Fwww.manuel-schoebel.com%2Fblog%2Firon-router-tutorial&amp;gsrc=3p&amp;jsh=m%3B%2F_%2Fscs%2Fapps-static%2F_%2Fjs%2Fk%3Doz.gapi.pt_BR.feOYWRHWdcI.O%2Fm%3D__features__%2Fam%3DIQ%2Frt%3Dj%2Fd%3D1%2Ft%3Dzcms%2Frs%3DAGLTcCNIsINdyCx27jsXNpCpb8qrOtp3ZQ#_methods=onPlusOne%2C_ready%2C_close%2C_open%2C_resizeMe%2C_renderstart%2Concircled%2Cdrefresh%2Cerefresh%2Conload&amp;id=I0_1429579272870&amp;parent=http%3A%2F%2Fwww.manuel-schoebel.com&amp;pfname=&amp;rpctoken=30288774" data-gapiattached="true" title="+1"></iframe>
                                        </div>
                                    </div>
                                    <div class="button facebook">
                                        <div id="fb-root" class=" fb_reset">
                                            <div style="position: absolute; top: -10000px; height: 0px; width: 0px;">
                                                <div></div>
                                            </div>
                                            <div style="position: absolute; top: -10000px; height: 0px; width: 0px;">
                                                <div>
                                                    <iframe name="fb_xdm_frame_http" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" id="fb_xdm_frame_http" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="http://static.ak.facebook.com/connect/xd_arbiter/KvoNGODIqPG.js?version=41#channel=f2f63cf1d&amp;origin=http%3A%2F%2Fwww.manuel-schoebel.com" style="border: none;"></iframe>
                                                    <iframe name="fb_xdm_frame_https" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" id="fb_xdm_frame_https" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="https://s-static.ak.facebook.com/connect/xd_arbiter/KvoNGODIqPG.js?version=41#channel=f2f63cf1d&amp;origin=http%3A%2F%2Fwww.manuel-schoebel.com" style="border: none;"></iframe>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="fb-like fb_iframe_widget" data-href="http://www.manuel-schoebel.com/blog/iron-router-tutorial" data-send="false" data-layout="button_count" data-width="" data-show-faces="false" data-action="like" data-colorscheme="" data-font="" data-via="undefined" fb-xfbml-state="rendered" fb-iframe-plugin-query="action=like&amp;app_id=&amp;container_width=0&amp;href=http%3A%2F%2Fwww.manuel-schoebel.com%2Fblog%2Firon-router-tutorial&amp;layout=button_count&amp;locale=en_US&amp;sdk=joey&amp;send=false&amp;show_faces=false"><span style="vertical-align: bottom; width: 78px; height: 20px;"><iframe name="f104188b94" width="1000px" height="1000px" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" title="fb:like Facebook Social Plugin" src="http://www.facebook.com/plugins/like.php?action=like&amp;app_id=&amp;channel=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter%2FKvoNGODIqPG.js%3Fversion%3D41%23cb%3Df25558b6%26domain%3Dwww.manuel-schoebel.com%26origin%3Dhttp%253A%252F%252Fwww.manuel-schoebel.com%252Ff2f63cf1d%26relation%3Dparent.parent&amp;container_width=0&amp;href=http%3A%2F%2Fwww.manuel-schoebel.com%2Fblog%2Firon-router-tutorial&amp;layout=button_count&amp;locale=en_US&amp;sdk=joey&amp;send=false&amp;show_faces=false" style="border: none; visibility: visible; width: 78px; height: 20px;" class=""></iframe></span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="col-sm-2">

                            <img title="Development" class="img-circle img-responsive ms-blog-post-image-small" src="/uploads/images/blog_tag_image_development.png">

                        </div>
                    </div>
                    <div class="blog-text">
                        <p>The Iron-Router is a "client and server side router designed specifically for Meteor". Before the Iron-Router there were two router that were most commonly used: Meteor-Router from Tom Coleman and Mini-Pages from Chris Mather. The learnings from those two routers are now combined into the Iron-Router project, created by Chris Mather and Tom Coleman. Also there is no router planned for the Meteor 1.0 release and it is not unrealistic that the Iron-Router will become the standard router package for Meteor. Because of this and also because the Iron-Router helps you a lot it is worth looking into it.</p>
                        <h2 id="what-is-so-special-about-a-router-for-meteor-">WHAT IS SO SPECIAL ABOUT A ROUTER FOR METEOR?</h2>
                        <p>Meteor works differently than other javascript frameworks like for example angular.js or backbone.js. Because of this, the router also has special requirements. For example: You have a site for path '/posts' where a list of posts will be shown. That means you have to have a subscription for the data of several posts and you have to wait for the data before you can render the template. What do you do while you are waiting for the data? You should show a loading template. Also you want to be able to access the data in your template. All this can be really annoying to implement yourself. The Iron-Router helps you do all of this really easily.</p>
                        <h2 id="in-this-article-you-will-learn">IN THIS ARTICLE YOU WILL LEARN</h2>
                        <ul>
                            <li>How to add the Iron-Router to your project</li>
                            <li>How to create routes</li>
                            <li>How to handle data and subscriptions</li>
                            <li>How to create and use multiple layouts</li>
                            <li>How to structure your meteor app with route controllers</li>
                        </ul>
                        <p>So let's start and have a look how to add the Iron-Router.</p>
                        <h2 id="adding-the-iron-router-to-your-meteor-project">ADDING THE IRON-ROUTER TO YOUR METEOR PROJECT</h2>
                        <p>The Meteor.js Iron Router is on athmosphere so you can simply add it with mrt.</p>
                        <pre><code>mrt add iron-router
</code></pre>
                        <h2 id="creating-routes">CREATING ROUTES</h2>
                        <h3 id="a-simpe-route-with-the-iron-router">A SIMPLE ROUTE WITH THE IRON-ROUTER</h3>
                        <p>Basically creating a route works as this:</p>
                        <pre><code>Router.map(function(){
    this.route(name:String, options:Object);
});
</code></pre>
                        <p>Within the Router.map function you call the route function and pass the name of the route and options that are optional. Imagine we want to render some static information when you navigate to the path '/about'. For that we have a template called 'about'. With the Iron-Router you can do this in only a few lines:</p>
                        <pre><code>// simple route with
// name 'about' that
// matches '/about' and automatically renders
// template 'about'
Router.map( function () {
  this.route('about');
});
</code></pre>
                        <p>This creates a route named 'about'. It also automatically matches the path '/about' and renders the template 'about'. Based on the name of the router, the Iron-Router already does a lot of stuff. Of course you can always configure a route exactly as you want and override the default behavior. For example you want a route for your home path '/' but you cannot name your route like this, of course. That means the name of our route and the path will be different:</p>
                        <pre><code>// simple route with
// name 'home' that
// matches '/' and automatically renders
// template 'home'
this.route('home', {
  path: '/'
});
</code></pre>
                        <p>This way the Iron-Router will render the template 'home' if someone navigate to the path '/'. You can also use the path option to create different complex routes, e. g. with parameters or regular expressions.</p>
                        <h3 id="route-parameter">ROUTE PARAMETER</h3>
                        <pre><code>// complex route with
// name 'postDetail' that for example
// matches '/posts/1' or '/posts/hello-world' and automatically renders
// template 'postDetail'
this.route('postDetail', {
  // get parameter via this.params
  path: '/posts/:_id'
});
</code></pre>
                        <h3 id="optional-route-part">OPTIONAL ROUTE PART</h3>
                        <pre><code>// complex route with
// name 'authorDetail' that for example
// matches '/authors/1/edit' or '/authors/1' and automatically renders
// template 'authorDetail'
// HINT:
//// get parameter via this.params
//// the part '/edit' is optional because of '?'
this.route('authorDetail', {
  path: '/authors/:_id/edit?'
});
</code></pre>
                        <h3 id="anonymous-parameter-globbing">ANONYMOUS PARAMETER GLOBBING</h3>
                        <pre><code>// complex route with
// name 'authorNotFound' that for example
// matches '/authors/123' or '/authors/dermambo' and automatically renders
// template 'authorNotFound'
// HINT: 
//// Get path of * (e.g. '/authors/are-you/there') from this.params (e.g. this.params = ['are-you/there', hash: undefined])
//// Create a route like this always at last! The routes are checked in the order you created them.
//// A route like "path:'/authors/:_id'" would never used if it is created after this one  
this.route('authorNotFound', {
  path: '/authors/*'
});
</code></pre>
                        <h3 id="named-parameter-globbing">NAMED PARAMETER GLOBBING</h3>
                        <pre><code>// complex route with
// name 'anyfile' that for example
// matches '/download.txt' or '/me.jpg' and automatically renders
// template 'anyfile'
// HINT:
//// Get path of :file(*) (e.g. '/files/invoice.pdf') from this.params.file (e.g. this.params = ["invoice.pdf", file: "invoice.pdf", hash: undefined] )
this.route('anyfile', {
  path: '/files/:file(*)'
});
</code></pre>
                        <h3 id="regular-expressions">REGULAR EXPRESSIONS</h3>
                        <pre><code>// complex route with
// name 'listPostsByDate' that for example
// matches '/posts/date/2013-03-23' and automatically renders
// template 'listPostsByDate'
// HINT:
//// Get parts of route (e.g. '/posts/date/2013-03-23') from this.params (e.g. this.params = ["2013", "03", "23", hash: undefined] )
this.route('listPostsByDate', {
  path: /^\/posts\/date\/(\d+)\-(\d+)\-(\d+)/
});
</code></pre>
                        <h3 id="global-not-found-route">GLOBAL NOT FOUND ROUTE</h3>
                        <pre><code>// complex route with
// name 'notFound' that for example
// matches '/non-sense/route/that-matches/nothing' and automatically renders
// template 'notFound'
// HINT:
//// Define a global not found route as the very last route in your router
//// Also this is different from the notFoundTemplate in your Iron Router
//// configuration!
this.route('notFound', {
  path: '*'
});
</code></pre>
                        <h3 id="using-the-route-names">USING THE ROUTE NAMES</h3>
                        <p>With the Iron-Router you should never type a path directly. For example in a simple link you could do it like this:</p>
                        <pre><code>&lt;nav&gt;
  &lt;a href="/about"&gt;About&lt;/a&gt;
&lt;/nav&gt;
</code></pre>
                        <p>Create a named route:</p>
                        <pre><code>// simple route with
// name 'about' that
// matches '/about' and automatically renders
// template 'about'
Router.map( function () {
  this.route('about');
});
</code></pre>
                        <p>And use the handlebars "pathFor" helper:</p>
                        <pre><code>&lt;nav&gt;
  &lt;a href="{{ pathFor 'about' }}"&gt;About&lt;/a&gt;
&lt;/nav&gt;
</code></pre>
                        <p>This will be the same. But you get a huge benefit: If you change the path later on, you will not have to change anything in your template.</p>
                        <p>The Iron-Router gives us a helper to get the path and one for the entire url:</p>
                        <pre><code>&lt;nav&gt;
  &lt;a href="{{ pathFor 'about' }}"&gt;About&lt;/a&gt;
  &lt;a href="{{ urlFor 'imprint' }}"&gt;Imprint&lt;/a&gt;
&lt;/nav&gt;
</code></pre>
                        <p>You can also access this in your code:</p>
                        <pre><code>// returns '/posts/1'
Router.routes['postDetail'].path({_id: 1});
// returns 'http://localhost:3000/posts/1'
Router.routes['postDetail'].url({_id: 1});
</code></pre>
                        <p>As you can see, if you have a route with a parameter, you have to pass the route parameter as an object attribute. If you want to do this in a handlebars helper, make sure that the needed data is available in your template. We will see how to do this in the next part.</p>
                        <h2 id="handle-data-and-subscriptions-with-the-iron-router">HANDLE DATA AND SUBSCRIPTIONS WITH THE IRON-ROUTER</h2>
                        <h3 id="data-context-as-an-object">DATA CONTEXT AS AN OBJECT</h3>
                        <p>In the examples above, we wanted to render a list of posts in a template. For that we need to have data - a list of posts. Let us imagine this is our template:</p>
                        <pre><code>&lt;template name="posts"&gt;
  &lt;h2&gt;A List Of Blog Posts&lt;/h2&gt;
  {{#each posts}}
    &lt;h4&gt;{{ title }}&lt;/h4&gt;
    &lt;p&gt;{{ text }}&lt;/p&gt;
  {{/each}}
&lt;/template&gt;
</code></pre>
                        <p>In our router we can now specify the data that is available in our template:</p>
                        <pre><code>// Data context as an object
this.route('posts', {
  path: '/posts',
  data: {
    posts: [
      {
        title: 'Did you know that...',
        text: 'If you yelled for 8 years, 7 months and 6 days, you would have produced enough sound energy to heat up one cup of coffee.'
      },
      {
        title: 'Hello World',
        text: 'Hi, i am new here!'
      }
    ]
  }
});
</code></pre>
                        <p>We simply specify the 'data' option as an object. You can pass an object like this directly or you can pass a function.</p>
                        <h3 id="data-context-as-a-function">DATA CONTEXT AS A FUNCTION</h3>
                        <p>Let us say we want to render the postDetail template that also shows the _id parameter of the route itself:</p>
                        <pre><code>&lt;template name="postDetail"&gt;
  &lt;h1&gt;{{ title }}&lt;/h1&gt;
  &lt;p&gt;&lt;i&gt;[ID: {{ _id }}]&lt;/i&gt;&lt;/p&gt;
  &lt;p&gt;{{ text }}&lt;/p&gt;
  &lt;a href="{{ pathFor 'oldData' }}"&gt;old data example&lt;/a&gt;
&lt;/template&gt;
</code></pre>
                        <p>We now have to access the route parameter and pass it to the data of our template.</p>
                        <pre><code>// Data context as a function
this.route('postDetail', {
  path: '/posts/:_id',
  data: function (){
    _id  = this.params._id;
    templateData = {
      _id: _id,
      title: 'Did you know that...',
      text: 'If you yelled for 8 years, 7 months and 6 days, you would have produced enough sound energy to heat up one cup of coffee.'
    };
    return templateData;
  }
});
</code></pre>
                        <p>As we can see, we define the 'data' option as a function. In this function we can access the route parameters simply with 'this.params' and pass it to the templateData object we return in this data-function.</p>
                        <h3 id="data-context-from-a-collection">DATA CONTEXT FROM A COLLECTION</h3>
                        <p>Until now, we just passed some static data to the template. But what we really want to do is to pass data from our collections. We now have a template in which we want to list different authors. The template looks like this:</p>
                        <pre><code>&lt;template name="authors"&gt;
  &lt;h1&gt;List of all authors&lt;/h1&gt;
  {{#each authors}}
    &lt;a href="{{ pathFor 'authorDetail' }}"&gt;{{ name }}&lt;/a&gt;
  {{/each}}
&lt;/template&gt;
</code></pre>
                        <p>Our goal is to get our list of authors out of the database. In order to do this we use the 'Authors' collection:</p>
                        <pre><code>// Data context from a collection
this.route('authors', {
  data: function() {
    templateData = { authors: Authors.find({}) };
    return templateData;
  }
});
</code></pre>
                        <p>In this case we can access our authors in the template because the Iron-Router handles the data context of the template for us automatically. In this special case we do not even need the data option to be a function. You could also simply pass the object directly like this:</p>
                        <pre><code>// Data context from a collection
this.route('authors', {
  data:  { authors: Authors.find({}) };
  }
});
</code></pre>
                        <p>Now we have our authors listed and if we click on one author we will see the author detail page. Lets say we opened a authors profile that does not exist, how can we handle the case when there is no data? The Iron-Router also helps us with that because you can specify a 'notFoundTemplate':</p>
                        <pre><code>// Data context from a collection with "notFound" template
// HINT:
//// If data is 'null' the notFoundTemplate will be automatically rendered
//// Also this is only for data and NOT for bad url paths. Should be called noDataFoundTemplate :-)
this.route('authorDetail', {
  path: '/authors/:_id',
  notFoundTemplate: 'authorNotFound',
  data: function() {
    return Authors.findOne({_id: this.params._id});
  }
});
</code></pre>
                        <p>The Iron-Router will automatically render the specified 'notFoundTemplate' if the data object is 'null'. Because 'Authors.findOne(...)' returns null if there is nothing found, it works out really easily. One other problem we have to think of when dealing with data is, how we handle waiting for subscriptions. And of course the Iron-Router also helps with this a lot!</p>
                        <h3 id="waiting-for-a-subscription">WAITING FOR A SUBSCRIPTION</h3>
                        <p>What we typically want to do is to render something that indicates 'loading'. We can do this in the global router configuration and tell the Iron-Router what template it should render while we are waiting for one or multiple subscriptions to be ready.</p>
                        <pre><code>// Global router config
Router.configure({
  loadingTemplate: 'loading'
});
</code></pre>
                        <p>Now the Iron-Router knows what to do while waiting. But we also have to tell the Iron-Router on what exactly it has to wait and we can specify this with the 'waitOn' option in the route options like this:</p>
                        <pre><code>// Wait for a subscription before rendering
// HINT:
//// waitOn can return any object with a reactive ready() function
//// you could also return an array with those objects e.g. [Authors.find(), Posts.find()]
this.route('authors', {
  waitOn: function() {
    return Meteor.subscribe('authorList');
  },
  data: function () {
    templateData = { authors: Authors.find() };
    return templateData;
  }
});
</code></pre>
                        <p>What happens here is, that the Iron-Router gets a subscription handle as the 'waitOn' option. The Iron-Router now calls the ready() function of the handle. Since it is a reactive data source, the ready function gets called again when the state changes. If the ready() function returns 'true' the Iron-Router knows, the data is arrived and we can go on now. The next that happens is, that the data object is created and the template get rendered. If the ready function returns false, the Iron-Router will render the specified 'loadingTemplate' from the global router configuration. Much like the 'data' option the 'waitOn' option can also be an object, an array of objects or a function that returns either an object or an array of objects. If you have an array of objects, the Iron-Router checks every object to be ready. If one isn't ready the 'loadingTemplate' will be rendered.</p>
                        <h2 id="layout-and-rendering">LAYOUT AND RENDERING</h2>
                        <p>Since now we always rendered the template that matches the name of the route. Of course we can easily configure a different template that should be rendered instead of the one that the Iron-Router automatically looks for by the name of the route:</p>
                        <pre><code>// Specify a different template than 'home'
this.route('home', {
  path: '/',
  template: 'myCustomHomeTemplate'
});
</code></pre>
                        <p>In this case the Iron-Router will not render the 'home' template but instead it will render the 'myCustomHomeTemplate' for us.</p>
                        <h3 id="specify-a-layout">SPECIFY A LAYOUT</h3>
                        <p>One thing that is very important and makes our lives much easier are layouts. In Meteor we only render and rerender parts of the dom and not always the whole thing. As an example we want to have a layout that specifies a menu, a footer and an area where the main content is rendered in. That could look like this:</p>
                        <pre><code>&lt;template name="complexLayout"&gt;
  &lt;div class="left"&gt;
    {{&gt; yield region="menu"}}
  &lt;/div&gt;


  &lt;div class="main"&gt;
    {{&gt; yield}}
  &lt;/div&gt;
  &lt;div class="bottom"&gt;
    {{&gt; yield region="footer"}}
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
                        <p>In this template are three areas that the Iron-Router renders in. One 'Main-Yield' and two 'Named-Yields' or 'Regions' with the names 'menu' and 'footer'. The names are important if we want to specify what template we want to render where. We now want that the Iron-Router to use our layout and to render the template 'myMenu' to the yield with the name 'menu' and the template 'myFooter' to the yield named 'footer'.</p>
                        <pre><code>this.route('home', {
  path: '/',
  layoutTemplate: 'complexLayout',
  yieldTemplates: {
    'myMenu': {to: 'menu'},
    'myFooter': {to: 'footer'}
  }
});
</code></pre>
                        <p>We achieve this with the route options 'layoutTemplate' and 'yieldTemplates'. The Iron-Router will now render as we like and also render the 'home' template to the unnamed main yield.</p>
                        <h3 id="override-the-route-function">OVERRIDE THE ROUTE FUNCTION</h3>
                        <p>Normally, the Iron-Router does everything automatically for us if we just specify the options. But if we want to have some special logic and more control we can also create our own function that is used when the route matches the path. For that we use the route option named 'action' which is a function:</p>
                        <pre><code>// Use a custom action function instead of automatic rendering
this.route('home', {
  path: '/',
  layoutTemplate: 'complexLayout',
  action: function() {
    // this is an instance of RouteController
    // access to:
    //  this.params
    //  this.wait
    //  this.render
    //  this.stop
    //  this.redirect


    // render yieldTemplates
    this.render('myMenu', {to: 'menu'});
    this.render('myFooter', {to: 'footer'});
    this.render('home');
  }
});
</code></pre>
                        <p>If we navigate to the path '/' the Iron-Router will call our own action function where we now have access to all we need to wait, react on route parameters or do what ever we like to do. That means we have the flexibility to write really less code and let the Iron-Router do the magic or take control our selves completely where necessary.</p>
                        <p>If your project is getting bigger, the examples above will get unhandy. If you specify your routes in one file, like I often do, you will not want to specify all the 'waitOn', 'data', custom 'action' functions and more all in this file. This is where we use the RouteControllers to structure our app better.</p>
                        <h2 id="iron-router-global-configuration">Iron Router Global Configuration</h2>
                        <p>It is better to use the global Iron Router configuration to specify a notFoundTemplate, a layoutTemplate and the loadingTemplate rather than doing this in a route itself:</p>
                        <pre><code>Router.configure({
  layoutTemplate: 'layout',
  notFoundTemplate: 'notFound',
  loadingTemplate: 'loading'
});
</code></pre>
                        <p>Also since a newer version of the Iron-Router it is important for the loading template to be rendered, to add a 'onBeforeHook' like this:</p>
                        <pre><code>Router.onBeforeAction('loading');
</code></pre>
                        <p>If you do not know what before-hooks are, check out my other blog post about <a href="http://manuel-schoebel.com/blog/meteorjs-iron-router-filters-before-and-after-hooks">filters, before and after hooks</a>.</p>
                        <h2 id="structure-with-controllers">STRUCTURE WITH CONTROLLERS</h2>
                        <p>A RoutController can basically do everything you could also specify in a route, so you can specify what layout to use, what to render or on what subscriptions the Iron-Router should wait for the given route. First we specify which controller for a specified path is to use:</p>
                        <pre><code>this.route('myDocuments', {
  path: '/documents',
  controller: 'MyDocumentsController'
});
</code></pre>
                        <p>The controller then could look like this:</p>
                        <pre><code>MyDocumentsController = BaseController.extend({
  layoutTemplate: 'baseLayout',
  yieldTemplates: {
    'userMenu': {to: 'menu'}
  },


  waitOn: function() {
    return Meteor.subscribe('waitingFor');
  },


  data: function () {
    data = { waitingFor : AllwaysLate.find() };
    return data;
  },


  onBeforeAction: function(){

  },


  onAfterAction: function(){


  },

  action: function(){
    this.render();
  }
});
</code></pre>
                        <p>As you can see, the attributes of the controller are looking pretty much the same as the route options. If you specify everything directly in the route itself, the Iron-Router also uses a RouteController, so it is pretty much the same internally. As you can see i extended the 'MyDocumentsController' from a controller named 'BaseController' which is NOT the controller from Iron-Router. I always create something like this in case i need functions that all of my controllers have in common. For a simple 'BaseController' you can just inherit from Iron-Routers 'RouteController' like this:</p>
                        <pre><code>BaseController = RouteController.extend({
  // specify stuff that every controller should have
});
</code></pre>
                        <p>There is much more to the Iron-Router like server-side rendering, <a href="http://manuel-schoebel.com/blog/meteorjs-iron-router-filters-before-and-after-hooks">before and after hooks</a> and more. But for this basic tutorial we are done! If you have questions or feedback just get in touch via <a href="http://www.twitter.com/dermambo">twitter/dermambo</a>.</p>

                    </div>

                    <div id="share-after" class="ms-blog-share sharrre" data-url="http://www.manuel-schoebel.com/blog/iron-router-tutorial" data-text="Iron-Router Tutorial" data-title="share">
                        <div class="buttons">
                            <div class="button twitter">
                                <iframe id="twitter-widget-1" scrolling="no" frameborder="0" allowtransparency="true" src="http://platform.twitter.com/widgets/tweet_button.20ed5cfd7315475c9d1d523194b1645f.en.html#_=1429579272813&amp;count=horizontal&amp;dnt=false&amp;id=twitter-widget-1&amp;lang=en&amp;original_referer=http%3A%2F%2Fwww.manuel-schoebel.com%2Fblog%2Firon-router-tutorial&amp;size=m&amp;text=Iron-Router%20Tutorial&amp;url=http%3A%2F%2Fwww.manuel-schoebel.com%2Fblog%2Firon-router-tutorial&amp;via=DerMambo" class="twitter-share-button twitter-tweet-button twitter-share-button twitter-count-horizontal" title="Twitter Tweet Button" data-twttr-rendered="true" style="width: 110px; height: 20px;"></iframe>
                            </div>
                            <div class="button googleplus">
                                <div id="___plusone_1" style="text-indent: 0px; margin: 0px; padding: 0px; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 450px; height: 20px; background: transparent;">
                                    <iframe frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position: static; top: 0px; width: 450px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" tabindex="0" vspace="0" width="100%" id="I1_1429579272872" name="I1_1429579272872" src="https://apis.google.com/u/0/se/0/_/+1/fastbutton?usegapi=1&amp;size=medium&amp;annotation=&amp;hl=en-US&amp;origin=http%3A%2F%2Fwww.manuel-schoebel.com&amp;url=http%3A%2F%2Fwww.manuel-schoebel.com%2Fblog%2Firon-router-tutorial&amp;gsrc=3p&amp;jsh=m%3B%2F_%2Fscs%2Fapps-static%2F_%2Fjs%2Fk%3Doz.gapi.pt_BR.feOYWRHWdcI.O%2Fm%3D__features__%2Fam%3DIQ%2Frt%3Dj%2Fd%3D1%2Ft%3Dzcms%2Frs%3DAGLTcCNIsINdyCx27jsXNpCpb8qrOtp3ZQ#_methods=onPlusOne%2C_ready%2C_close%2C_open%2C_resizeMe%2C_renderstart%2Concircled%2Cdrefresh%2Cerefresh%2Conload&amp;id=I1_1429579272872&amp;parent=http%3A%2F%2Fwww.manuel-schoebel.com&amp;pfname=&amp;rpctoken=36338183" data-gapiattached="true" title="+1"></iframe>
                                </div>
                            </div>
                            <div class="button facebook">
                                <div id="fb-root"></div>
                                <div class="fb-like fb_iframe_widget" data-href="http://www.manuel-schoebel.com/blog/iron-router-tutorial" data-send="false" data-layout="button_count" data-width="" data-show-faces="false" data-action="like" data-colorscheme="" data-font="" data-via="undefined" fb-xfbml-state="rendered" fb-iframe-plugin-query="action=like&amp;app_id=&amp;container_width=0&amp;href=http%3A%2F%2Fwww.manuel-schoebel.com%2Fblog%2Firon-router-tutorial&amp;layout=button_count&amp;locale=en_US&amp;sdk=joey&amp;send=false&amp;show_faces=false"><span style="vertical-align: bottom; width: 78px; height: 20px;"><iframe name="f8725e9d8" width="1000px" height="1000px" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" title="fb:like Facebook Social Plugin" src="http://www.facebook.com/plugins/like.php?action=like&amp;app_id=&amp;channel=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter%2FKvoNGODIqPG.js%3Fversion%3D41%23cb%3Df25c955ebc%26domain%3Dwww.manuel-schoebel.com%26origin%3Dhttp%253A%252F%252Fwww.manuel-schoebel.com%252Ff2f63cf1d%26relation%3Dparent.parent&amp;container_width=0&amp;href=http%3A%2F%2Fwww.manuel-schoebel.com%2Fblog%2Firon-router-tutorial&amp;layout=button_count&amp;locale=en_US&amp;sdk=joey&amp;send=false&amp;show_faces=false" style="border: none; visibility: visible; width: 78px; height: 20px;" class=""></iframe></span>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="row">
                        <div class="section-heading">
                            <h3>Comments</h3>
                        </div>
                        <div class="col-sm-12">
                            <div id="disqus_thread">
                                <iframe id="dsq-2" data-disqus-uid="2" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="http://disqus.com/embed/comments/?base=default&amp;version=653c43552f211a5f183d7e003ca21b66&amp;f=manuelschoebelcom&amp;t_u=http%3A%2F%2Fwww.manuel-schoebel.com%2Fblog%2Firon-router-tutorial&amp;t_d=Iron-Router%20Tutorial&amp;t_t=Iron-Router%20Tutorial&amp;s_o=default#2" style="width: 100% !important; border: none !important; overflow: hidden !important; height: 12646px !important;" horizontalscrolling="no" verticalscrolling="no"></iframe>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SIDEBAR -->
                <div class="col-md-4">
                    <div class="row">
                        <div class="col-lg-12 hidden-sm">
                            <div class="well">
                                <h4>Book: Meteor In Action</h4>
                                <div class="pull-left">
                                    <img style="max-height: 150px;" src="http://meteorinaction.com/img/cover-mia.jpg" class="img-responsive">
                                </div>
                                <div class="pull-left" style="margin-left: 5px; max-width: 60%;">
                                    <p>
                                        Meteor brings the fun back to developing web applications. Let us show you how to make the most of this amazing platform to impress users, reduce development time, and turn your ideas into code.
                                    </p>
                                </div>
                                <div class="clearfix"></div>
                                <hr>
                                <div class="text-center">
                                    <a target="_blank" href="http://manning.com/hochhaus/?a_aid=mscom&amp;a_bid=aeff5509" class="btn btn-block btn-success"><i class="fa fa-external-link-square"></i> Get it now!</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <!-- main row -->
        </div>
    </div>


    <footer class="">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <p><a href="/imprint">Imprint</a>
                    </p>
                </div>
            </div>
        </div>
    </footer><span id="hc_extension_svg_filters" hidden=""><svg xmlns="http://www.w3.org/2000/svg" version="1.1"><defs><filter id="hc_extension_off"><feComponentTransfer><feFuncR type="table" tableValues="0 1"></feFuncR><feFuncG type="table" tableValues="0 1"></feFuncG><feFuncB type="table" tableValues="0 1"></feFuncB></feComponentTransfer></filter><filter id="hc_extension_highcontrast"><feComponentTransfer><feFuncR type="gamma" exponent="3.0"></feFuncR><feFuncG type="gamma" exponent="3.0"></feFuncG><feFuncB type="gamma" exponent="3.0"></feFuncB></feComponentTransfer></filter><filter id="hc_extension_highcontrast_back"><feComponentTransfer><feFuncR type="gamma" exponent="0.33"></feFuncR><feFuncG type="gamma" exponent="0.33"></feFuncG><feFuncB type="gamma" exponent="0.33"></feFuncB></feComponentTransfer></filter><filter id="hc_extension_grayscale"><feColorMatrix type="matrix" values="0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"></feColorMatrix><feComponentTransfer><feFuncR type="gamma" exponent="3"></feFuncR><feFuncG type="gamma" exponent="3"></feFuncG><feFuncB type="gamma" exponent="3"></feFuncB></feComponentTransfer></filter><filter id="hc_extension_grayscale_back"><feComponentTransfer><feFuncR type="gamma" exponent="0.33"></feFuncR><feFuncG type="gamma" exponent="0.33"></feFuncG><feFuncB type="gamma" exponent="0.33"></feFuncB></feComponentTransfer></filter><filter id="hc_extension_invert"><feComponentTransfer><feFuncR type="gamma" amplitude="-1" exponent="3" offset="1"></feFuncR><feFuncG type="gamma" amplitude="-1" exponent="3" offset="1"></feFuncG><feFuncB type="gamma" amplitude="-1" exponent="3" offset="1"></feFuncB></feComponentTransfer></filter><filter id="hc_extension_invert_back"><feComponentTransfer><feFuncR type="table" tableValues="1 0"></feFuncR><feFuncG type="table" tableValues="1 0"></feFuncG><feFuncB type="table" tableValues="1 0"></feFuncB></feComponentTransfer><feComponentTransfer><feFuncR type="gamma" exponent="1.7"></feFuncR><feFuncG type="gamma" exponent="1.7"></feFuncG><feFuncB type="gamma" exponent="1.7"></feFuncB></feComponentTransfer></filter><filter id="hc_extension_invert_grayscale"><feColorMatrix type="matrix" values="0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"></feColorMatrix><feComponentTransfer><feFuncR type="gamma" amplitude="-1" exponent="3" offset="1"></feFuncR><feFuncG type="gamma" amplitude="-1" exponent="3" offset="1"></feFuncG><feFuncB type="gamma" amplitude="-1" exponent="3" offset="1"></feFuncB></feComponentTransfer></filter><filter id="hc_extension_yellow_on_black"><feComponentTransfer><feFuncR type="gamma" amplitude="-1" exponent="3" offset="1"></feFuncR><feFuncG type="gamma" amplitude="-1" exponent="3" offset="1"></feFuncG><feFuncB type="gamma" amplitude="-1" exponent="3" offset="1"></feFuncB></feComponentTransfer><feColorMatrix type="matrix" values="0.3 0.5 0.2 0 0 0.3 0.5 0.2 0 0 0 0 0 0 0 0 0 0 1 0"></feColorMatrix></filter><filter id="hc_extension_yellow_on_black_back"><feComponentTransfer><feFuncR type="table" tableValues="1 0"></feFuncR><feFuncG type="table" tableValues="1 0"></feFuncG><feFuncB type="table" tableValues="1 0"></feFuncB></feComponentTransfer><feComponentTransfer><feFuncR type="gamma" exponent="0.33"></feFuncR><feFuncG type="gamma" exponent="0.33"></feFuncG><feFuncB type="gamma" exponent="0.33"></feFuncB></feComponentTransfer></filter></defs></svg></span>
    <iframe name="oauth2relay406629654" id="oauth2relay406629654" src="https://accounts.google.com/o/oauth2/postmessageRelay?parent=http%3A%2F%2Fwww.manuel-schoebel.com#rpctoken=510576304&amp;forcesecure=1" tabindex="-1" style="width: 1px; height: 1px; position: absolute; top: -100px;"></iframe>
</body>

</html>